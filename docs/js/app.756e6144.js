(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],d=0,u=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);h&&h(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r=[];function n(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"b3b9e84e"}[t]+".js"}function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=i[t]=[e,s]}));e.push(a[2]=s);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=n(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,a[1](l)}i[t]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var h=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1038:function(t,e,a){t.exports=a.p+"img/stop.1f872fc4.svg"},2838:function(t,e,a){},"30d5":function(t,e,a){t.exports=a.p+"img/beet.12507586.svg"},3204:function(t,e,a){},"3bfa":function(t,e,a){"use strict";var s=a("2838"),i=a.n(s);i.a},"3ef9":function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="4678"},"4fc1":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"main-container"}},[a("router-view")],1)])},r=[],n=(a("7faf"),a("2877")),o={},c=Object(n["a"])(o,i,r,!1,null,null,null),l=c.exports,d=(a("d3b7"),a("8c4f")),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.doneTransitioning?t._e():a("Splash",{attrs:{loaded:t.doneLoading}})],1)},u=[],f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"splashcontainer",staticClass:"splash"},[s("div",{staticClass:"logo-container"},[s("transition",{attrs:{name:"move"}},[t.hideLogo?t._e():s("img",{ref:"logoimg",staticClass:"logo-img",style:{top:t.top+"px"},attrs:{src:a("30d5")}})]),s("transition",{attrs:{name:"fade"}},[t.loaded?t._e():s("div",{staticClass:"logo"},[s("span",{staticClass:"beet-color"},[t._v("heart")]),s("span",{staticClass:"green-color"},[t._v("beet")])])]),s("transition",{attrs:{name:"fade"}},[t.loaded?t._e():s("div",{staticClass:"slogan"},[s("span",[t._v("listen with your heart")])])])],1),s("transition",{attrs:{name:"fade"}},[t.loaded?t._e():s("div",{staticClass:"loader"},[s("Loader")],1)])],1)},v=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader"},[a("div",{staticClass:"preloader"},[a("div",{staticClass:"preloader-dots"},t._l(4,(function(e){return a("div",{key:e,staticClass:"dot-container"},[t._m(0,!0)])})),0)])])},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dot"},[s("img",{staticStyle:{width:"22px"},attrs:{src:a("5968")}})])}],b={name:"Loader"},g=b,j=(a("99d5"),Object(n["a"])(g,m,p,!1,null,"7899c255",null)),y=j.exports,C={name:"Splash",components:{Loader:y},data:function(){return{top:"200px",hideLogo:!1}},watch:{loaded:function(t,e){this.startTransition()}},props:["loaded"],methods:{startTransition:function(){var t=this;this.top=this.$refs.logoimg.getBoundingClientRect().top-this.$refs.splashcontainer.getBoundingClientRect().top,setTimeout((function(){t.hideLogo=t.loaded}),200)}}},w=C,k=(a("9b19"),Object(n["a"])(w,f,v,!1,null,"1aefd78f",null)),x=k.exports,_={name:"Home",components:{Splash:x},data:function(){return{timeout:null,isLoading:!0,doneTransitioning:!1}},computed:{doneLoading:function(){return!this.isLoading}},methods:{loaded:function(){var t=this;this.isLoading=!1,setTimeout((function(){t.doneTransitioning=!0,t.$router.push("select")}),695)}},mounted:function(){this.$nextTick((function(){this.timeout=setTimeout(this.loaded,3e3)}));var t=new Image;t.src="../assets/hollowbeat.svg"},beforeDestroy:function(){clearTimeout(this.timeout)}},A=_,T=(a("c219"),Object(n["a"])(A,h,u,!1,null,null,null)),V=T.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heartrate"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded0,expression:"loaded0"}],staticClass:"camera-container"},[s("div",{staticClass:"close-button"},[s("a",{on:{click:t.close}},[t._v("×")])]),s("Timer",{attrs:{"is-started":t.isStarted},on:{"state-changed":t.timerStateChanged}}),s("div",{staticClass:"camera"},[s("video",{ref:"video",staticStyle:{display:"none"},attrs:{id:"v",width:"100",height:"100",muted:""},domProps:{muted:!0}}),s("canvas",{ref:"canvas",attrs:{id:"c",width:"100",height:"100"}})]),s("img",{staticClass:"camera-overlay",attrs:{src:a("b4be")}}),s("div",{staticClass:"pulse-container"},[s("div",{staticClass:"pulse"},[t._v(t._s(t.pulse)),s("span",{staticClass:"unit"},[t._v("BPM")])])])],1)]),s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"instructions-container"},[s("div",{staticClass:"instructions"},[t._v("Stay still and breath normally")]),s("div",{staticClass:"chart"},[s("LineChart",{ref:"chart",attrs:{"chart-data":t.chartData,options:t.chartOptions,height:170}})],1)])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded0,expression:"loaded0"}],staticClass:"bottom-container"},[s("div",{staticClass:"instructions-container"},[t.torchAvailable?s("div",{staticClass:"flashlight"},[s("div",{staticClass:"title"},[t._v("Keep the flashlight")]),s("Toggle",{model:{value:t.isFlashOn,callback:function(e){t.isFlashOn=e},expression:"isFlashOn"}})],1):t._e(),s("div",{staticClass:"start-button"},[t.cameraReady?s("a",{class:{started:t.isStarted},on:{click:t.start}},[t.isStarted?t._e():s("img",{attrs:{src:a("5830")}}),t.isStarted?s("img",{attrs:{src:a("1038")}}):t._e()]):t._e()])])])]),s("transition",{attrs:{name:"fade"}},[t.isDisclaimerRead?t._e():s("Instructions",{directives:[{name:"show",rawName:"v-show",value:t.loaded1,expression:"loaded1"}],attrs:{"proceed-callback":t.proceed}})],1)],1)},O=[],M=(a("a434"),a("ac1f"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toggle"},[a("input",{staticClass:"tgl tgl-skewed",attrs:{id:"cb3",type:"checkbox"},domProps:{checked:t.checked},on:{change:t.emitChange}}),a("label",{staticClass:"tgl-btn",attrs:{"data-tg-off":"OFF","data-tg-on":"ON",for:"cb3"}})])}),D=[],z={name:"Toggle",props:["value"],data:function(){return{checked:this.value}},methods:{emitChange:function(){this.checked=!this.checked,this.$emit("input",this.checked)}}},P=z,E=(a("7cad"),Object(n["a"])(P,M,D,!1,null,"3c19c14a",null)),L=E.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overlay"},[a("div",{staticClass:"modal"},[t._m(0),a("div",{staticClass:"proceed"},[a("a",{on:{click:t.proceedCallback}},[t._v("Proceed")])])])])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"instructions"},[a("p",[t._v("Cover the camera with your index finger then press the"),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(" (▶)")]),t._v(" button.")]),a("p",[t._v("Stay still for the next 25 seconds while your heart rate is being measured. Make sure your finger is not pressed too hard.")]),a("p",[t._v("For the best results keep the flashlight on or place a light source behind your finger.")]),a("p",{staticClass:"beet-color"},[t._v("This app is experimental and is meant for fun. The results won't be very accurate and are not to be used for any medical purposes.")])])}],I={name:"Instructions",components:{},props:["proceedCallback"],data:function(){return{}},computed:{},methods:{proceed:function(){this.isDisclaimerRead=!0}}},F=I,N=(a("6898"),Object(n["a"])(F,$,B,!1,null,"3b5337ca",null)),U=N.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timer"},[a("svg",{attrs:{width:"250",height:"250"}},[a("path",{attrs:{d:t.bgTimerArc,stroke:"white",fill:"none","stroke-width":"15"}}),a("path",{attrs:{d:t.fgTimerArc,stroke:"#BDD544",fill:"none","stroke-width":"15"}})])])},q=[],H=(a("a15b"),{name:"Timer",props:["isStarted"],data:function(){return{bgTimerArc:"",fgTimerArc:"",timer:null,timerDuration:25}},watch:{isStarted:function(t,e){t!==e&&this.start()}},computed:{},methods:{polarToCartesian:function(t,e,a,s){var i=(s-90)*Math.PI/180;return{x:t+a*Math.cos(i),y:e+a*Math.sin(i)}},describeArc:function(t,e,a,s,i){var r=this.polarToCartesian(t,e,a,i),n=this.polarToCartesian(t,e,a,s),o=i-s<=180?"0":"1",c=["M",r.x,r.y,"A",a,a,0,o,0,n.x,n.y].join(" ");return c},updateTimer:function(){this.timerDuration--,this.fgTimerArc=this.describeArc(125,125,115,225,225+10.8*(25-this.timerDuration)),this.timerDuration<=0&&(clearInterval(this.timer),this.$emit("state-changed",!1))},start:function(){console.log("start action"),clearInterval(this.timer),this.isStarted?(this.fgTimerArc="",this.timerDuration=25,this.$emit("state-changed",!0),this.timer=setInterval(this.updateTimer,1e3)):(this.fgTimerArc=this.describeArc(125,125,115,225,495),this.$emit("state-changed",!1))}},mounted:function(){this.bgTimerArc=this.describeArc(125,125,115,225,495),this.fgTimerArc=this.describeArc(125,125,115,225,495)},beforeDestroy:function(){clearInterval(this.timer)}}),W=H,J=(a("8960"),Object(n["a"])(W,R,q,!1,null,"39fcdc83",null)),K=J.exports,Z=a("1fca"),G=Z["b"].reactiveProp,Q={name:"LineChart",extends:Z["a"],mixins:[G],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)},methods:{render:function(){this.$data._chart.update()}}},X=(a("4160"),a("d81d"),a("13d5"),a("fb6a"),a("b0c0"),a("b680"),a("159b"),a("2909")),Y={video:!0,audio:!1,width:{min:320,ideal:320},height:{min:240,ideal:240}},tt=!1,et={initData:function(){this.vars={torchAvailable:!1,isTorchOn:!0,isStarted:!1,hist:[],dataLength:300,sampledBrightness:[],medianValues:[],movingAverageValues:[],medianAverageValues:[],bpmValues:[],dps:[],brightnessValues:[],xVal:0,video:null,context:null,width:100,height:100,timer:null}},initialize:function(t,e,a,s){var i=this;this.initData(),this.vars.video=t,this.vars.context=e,this.readyCallback=a,this.errorCallback=s,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.enumerateDevices().then((function(t){t.forEach((function(t){console.log(t.kind+": "+t.label+" id = "+t.deviceId),"videoinput"===t.kind&&(Y.video={optional:[{sourceId:t.deviceId},{fillLightMode:"on"}]})})),i.vars.width=i.vars.video.width,i.vars.height=i.vars.video.height,tt||navigator.mediaDevices.getUserMedia(Y).then((function(t){return i.startStream(t)}))})).catch((function(t){console.log(t.name+": "+t.message),i.errorCallback(t.name+": "+t.message)})):this.errorCallback("This browser is currently not supported")},startStream:function(t){var e=this;tt=!0;var a=t.getVideoTracks()[0];setTimeout((function(){var t=a.getCapabilities();t.torch&&(e.vars.torchAvailable=!0,a.applyConstraints({advanced:[{torch:e.vars.isTorchOn}]})),e.readyCallback({torchAvailable:e.vars.torchAvailable})}),500),this.vars.video.srcObject=t,this.vars.video.play(),requestAnimationFrame((function(){return e.draw()}))},toggleTorch:function(t){this.vars.isTorchOn=t,this.vars.video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:this.vars.isTorchOn}]})},stopStream:function(){this.stop(),this.readyCallback=null,this.errorCallback=null,this.dataUpdateCallback=null,this.bpmUpdateCallback=null,tt=!1,this.vars.video.srcObject&&this.vars.video.srcObject.getTracks().forEach((function(t){t.stop()})),this.vars.video.pause()},start:function(t,e){var a=this;tt||this.errorCallback("Stream not ready"),this.dataUpdateCallback=t,this.bpmUpdateCallback=e,this.vars.isStarted=!0,clearInterval(this.vars.timer),this.vars.timer=setInterval((function(){return a.calculateBPM()}),500)},stop:function(){this.vars.isStarted=!1,clearInterval(this.vars.timer),this.resetValues()},draw:function(){var t=this,e=this.readFrame();e&&this.getBrightness(e.data),tt&&requestAnimationFrame((function(){return t.draw()}))},readFrame:function(){try{this.vars.context.drawImage(this.vars.video,0,0,this.vars.width,this.vars.height)}catch(t){return null}return tt?this.vars.context.getImageData(0,0,this.vars.width,this.vars.height):null},getBrightness:function(t){for(var e=30,a=[Math.floor(this.vars.width/2)-e,Math.ceil(this.vars.width/2)+e],s=[Math.floor(this.vars.height/2)-e,Math.ceil(this.vars.height/2)+e],i=0,r=0,n=a[0];n<=a[1];n++)for(var o=s[0];o<=s[1];o++){var c=4*(o*this.vars.width+n);i+=t[c]+t[c+1]+t[c+2],r++}var l=i/3/r,d=this.findMovingAverage(this.findMovingAverage(this.findMovingAverage(l)));this.vars.isStarted&&this.updateChart(l,d),this.vars.medianAverageValues.push(d),this.vars.medianAverageValues.length>25&&this.vars.medianAverageValues.shift(),this.calculateMedianLine(),this.vars.hist.push({v:d,t:Date.now()});this.vars.hist.length>=this.vars.dataLength&&this.vars.hist.shift()},findMovingAverage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=(this.vars.movingAverageValues.length===e&&this.vars.movingAverageValues.shift(),this.vars.movingAverageValues.reduce((function(t,e){return e+t}),0)),s=(a+t)/(this.vars.movingAverageValues.length+1);return this.vars.movingAverageValues.push(s),s},updateChart:function(t,e){this.vars.brightnessValues.push({x:this.vars.xVal,y:e}),this.vars.brightnessValues.length>this.vars.dataLength&&this.vars.brightnessValues.shift();var a=this.vars.dataLength/30;if(this.vars.xVal%a===0){this.vars.sampledBrightness.push({x:this.vars.xVal,y:e-(this.vars.medianValues[this.vars.medianValues.length-1]?this.vars.medianValues[this.vars.medianValues.length-1].y:0)}),this.vars.sampledBrightness.length>10&&this.vars.sampledBrightness.shift();var s=this.vars.sampledBrightness.map((function(t){return t.y}));if(s.length>0){var i=Math.min.apply(Math,Object(X["a"])(s)),r=Math.max.apply(Math,Object(X["a"])(s)),n=this.vars.sampledBrightness[this.vars.sampledBrightness.length-1],o={y:Math.floor((n.y-i)/(r-i)*8),x:n.x};this.dataUpdateCallback(o)}}this.vars.xVal++},calculateMedianLine:function(){var t=Object(X["a"])(this.vars.medianAverageValues);t.sort((function(t,e){return t-e})),this.vars.medianValues.push({y:t[Math.floor(t.length/2)],x:this.vars.xVal}),this.vars.medianValues.length>this.vars.dataLength&&this.vars.medianValues.shift()},resetValues:function(){this.vars.hist=[],this.vars.sampledBrightness=[],this.vars.medianValues=[],this.vars.movingAverageValues=[0],this.vars.medianAverageValues=[0],this.vars.bpmValues=[],this.vars.dps=[],this.vars.brightnessValues=[],this.vars.xVal=0,this.vars.timer=null,this.dataUpdateCallback=null,this.bpmUpdateCallback=null},calculateFinalBPM:function(){var t=this.vars.bpmValues.slice(Math.max(this.vars.bpmValues.length-8,1)),e=t.reduce((function(t,e){return t+e}),0)/t.length,a=this.vars.bpmValues.reduce((function(t,e){return t+e}),0)/this.vars.bpmValues.length;isNaN(a)||this.bpmUpdateCallback({currentBPM:e,avgBPM:a.toFixed(0)})},calculateBPM:function(t){var e,a,s,i=this,r=0,n=0;if(this.vars.hist.forEach((function(t,o){var c=i.vars.medianValues[o].y;!e&&t.v>c&&(e=!0,s=o),e&&t.v<c&&(void 0!==a&&void 0!==s&&(r+=i.vars.hist[o].t-i.vars.hist[a].t,n++),e=!1,a=o)})),this.vars.isStarted){if(n){var o=6e4/(r/n);return o<=220&&o>=40&&this.vars.bpmValues.push(o),this.vars.bpmValues.length>1.2*this.vars.dataLength&&this.vars.bpmValues.shift(),this.calculateFinalBPM()}return"--"}return"--"}},at={name:"Heartrate",components:{Toggle:L,Instructions:U,Timer:K,LineChart:Q},watch:{isFlashOn:function(t,e){et.toggleTorch(t)}},data:function(){return{loaded0:!1,loaded1:!1,chartData:{},chartOptions:{},isStarted:!1,isFlashOn:!0,isDisclaimerRead:!1,pulse:"--",torchAvailable:!1,cameraReady:!1}},computed:{},methods:{start:function(){this.isStarted=!this.isStarted,this.isStarted?(this.resetChart(),et.start(this.onPulseDataUpdate,this.onBPMUpdate)):et.stop()},timerStateChanged:function(t){this.isStarted=t,this.isStarted||et.stop()},resetChart:function(){this.chartData.datasets[0].data=[],this.chartData.labels=[],this.$refs.chart.render()},updateChart:function(t){this.chartData.datasets[0].data.push(t),this.chartData.labels.push(t.x),this.chartData.datasets[0].data.length>10&&(this.chartData.datasets[0].data.splice(0,1),this.chartData.labels.splice(0,1)),this.$refs.chart.render()},proceed:function(){this.isDisclaimerRead=!0;var t=this.$refs.canvas.getContext("2d");et.initialize(this.$refs.video,t,this.onPulseAnalyzerReady,this.onPulseAnalyzerError)},onPulseAnalyzerReady:function(t){this.cameraReady=!0,this.torchAvailable=t.torchAvailable},onPulseDataUpdate:function(t){this.updateChart(t)},onBPMUpdate:function(t){this.pulse=t.avgBPM,console.log(t)},onPulseAnalyzerError:function(t){console.log(t)},close:function(){this.$router.replace("/select")},loadElements:function(t){var e=this;this["loaded".concat(t)]=!0,t++,t<=1&&setTimeout((function(){return e.loadElements(t)}),200)},getRandomInt:function(){return Math.floor(8*Math.random())},initChart:function(){var t=new Image;t.src=a("5a2f"),this.chartOptions={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},tooltips:{enabled:!1},layout:{padding:{left:0,right:0,top:50,bottom:50}},scales:{yAxes:[{display:!0,gridLines:{color:"#D3D3C8",display:!0,drawBorder:!1,zeroLineColor:"#D3D3C8",zeroLineWidth:1,lineWidth:1},ticks:{beginAtZero:!0,stepSize:2,suggestedMax:8,suggestedMin:0,display:!1,padding:25}}],xAxes:[{display:!1}]}},this.chartData={labels:[],datasets:[{data:[],fill:!1,pointStyle:t,borderWidth:0,borderColor:"transparent"}]}}},mounted:function(){var t=this;this.initChart(),window.onbeforeunload=function(){clearInterval(t.timer),t.isStarted=!1,et.stopStream()},this.$nextTick((function(){this.loadElements(0)}))},beforeDestroy:function(){clearInterval(this.timer),this.isStarted=!1,et.stopStream()}},st=at,it=(a("9bff"),Object(n["a"])(st,S,O,!1,null,"31dfe39e",null)),rt=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[t._m(0),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded0,expression:"loaded0"}],staticClass:"select-container"},[a("div",{staticClass:"text"},[t._v("I want to")]),a("transition",{attrs:{name:"fade"}},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.loaded1,expression:"loaded1"}],staticClass:"a",attrs:{to:"/heartrate/relax"}},[t._v("relax")])],1),a("transition",{attrs:{name:"fade"}},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.loaded2,expression:"loaded2"}],staticClass:"a",attrs:{to:"/heartrate/listen"}},[t._v("listen")])],1),a("transition",{attrs:{name:"fade"}},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.loaded3,expression:"loaded3"}],staticClass:"a",attrs:{to:"/heartrate/exercise"}},[t._v("exercise")])],1),a("transition",{attrs:{name:"fade"}},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.loaded4,expression:"loaded4"}],staticClass:"a",attrs:{to:"/"}},[t._v("understand")])],1)],1)]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded0,expression:"loaded0"}],staticClass:"footer"},[a("span",{staticClass:"beet-color"},[t._v("heart")]),a("span",{staticClass:"green-color"},[t._v("beet")])])])],1)},ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo-img",attrs:{src:a("30d5")}})])}],ct={name:"Select",components:{},data:function(){return{loaded0:!1,loaded1:!1,loaded2:!1,loaded3:!1,loaded4:!1}},mounted:function(){this.$nextTick((function(){this.loadElements(0)}))},methods:{loadElements:function(t){var e=this;this["loaded".concat(t)]=!0,t++,t<=4&&setTimeout((function(){return e.loadElements(t)}),200)}}},lt=ct,dt=(a("3bfa"),Object(n["a"])(lt,nt,ot,!1,null,null,null)),ht=dt.exports;s["a"].use(d["a"]);var ut=[{path:"/",name:"Home",component:V},{path:"/heartrate/:type",name:"Heartrate",component:rt},{path:"/select",name:"Select",component:ht},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],ft=new d["a"]({routes:ut}),vt=ft,mt=a("2f62");s["a"].use(mt["a"]);var pt=new mt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),bt=a("9483");Object(bt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),s["a"].config.productionTip=!1,new s["a"]({router:vt,store:pt,render:function(t){return t(l)}}).$mount("#app")},5830:function(t,e,a){t.exports=a.p+"img/play.5d95f364.svg"},5968:function(t,e,a){t.exports=a.p+"img/note-green.3154eb12.svg"},"5a2f":function(t,e,a){t.exports=a.p+"img/note-beet.c8a4b80d.svg"},6898:function(t,e,a){"use strict";var s=a("3204"),i=a.n(s);i.a},"7cad":function(t,e,a){"use strict";var s=a("b059"),i=a.n(s);i.a},"7faf":function(t,e,a){"use strict";var s=a("b8ff"),i=a.n(s);i.a},8960:function(t,e,a){"use strict";var s=a("3ef9"),i=a.n(s);i.a},"950f":function(t,e,a){},"99d5":function(t,e,a){"use strict";var s=a("950f"),i=a.n(s);i.a},"9b19":function(t,e,a){"use strict";var s=a("ad4f"),i=a.n(s);i.a},"9bff":function(t,e,a){"use strict";var s=a("c3a5"),i=a.n(s);i.a},ad4f:function(t,e,a){},b059:function(t,e,a){},b4be:function(t,e,a){t.exports=a.p+"img/hollowbeat.2e02ba89.svg"},b8ff:function(t,e,a){},c219:function(t,e,a){"use strict";var s=a("4fc1"),i=a.n(s);i.a},c3a5:function(t,e,a){}});
//# sourceMappingURL=app.756e6144.js.map